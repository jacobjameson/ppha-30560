<!DOCTYPE html>
<meta charset="utf-8">
<style>

</style> </style>
      <title>Data Viz | Jacob Jameson</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" 
      rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
      <link href="styles.css" rel="stylesheet"></style>
      <script src="https://d3js.org/d3.v6.js"></script>
      <body>

  <body>
    <h1>
      Analyzing Social Network Data From Add Health 
    </h1>

    <div id="intro">
      <h2>
        Author: Jacob Jameson
      </h2>

</body>

<body>

  <body>
    <h3>
      The National Longitudinal Study of Adolescent to Adult Health (Add Health) 
      is a longitudinal study of a nationally representative sample of over 
      20,000 adolescents who were in grades 7-12 during the 1994-95 school year, 
      and have been followed for five waves to date, most recently in 2016-18.
      <br>

      <div id="my_dataviz"></div>

      <br>
      Of the interesting data collected during the first wave of the survey,
      data in the form of friendship nominations collected at Wave I serve as 
      the friendship measure. Adolescents were asked to identify their five 
      closest female and five closest male friends from a provided roster. 
      ID codes were used to link adolescents to nominated friends, creating 
      friendship networks as well as allowing for behavioral data to be collected 
      directly from adolescents. Nominations for out-of-school friends were not 
      considered, as data was not collected on these individuals. In this way, 
      friendships are restricted to those occurring within the school in which the 
      adolescent is enrolled, allowing for the formation of two complete networks 
      (i.e., School A and School B) of adolescents, a requirement of our analyses.
    </h3>

</body>


<script>

// set the dimensions and margins of the graph
const margin = {top: 10, right: 30, bottom: 30, left: 40},
  width = 400 - margin.left - margin.right,
  height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
const svg = d3.select("#my_dataviz")
.append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
.append("g")
  .attr("transform",
        `translate(${margin.left}, ${margin.top})`);

d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_network.json").then( function( data) {

  // Initialize the links
  const link = svg
    .selectAll("line")
    .data(data.links)
    .join("line")
      .style("stroke", "#aaa")

  // Initialize the nodes
  const node = svg
    .selectAll("circle")
    .data(data.nodes)
    .join("circle")
      .attr("r", 20)
      .style("fill", "#69b3a2")

  // Let's list the force we wanna apply on the network
  const simulation = d3.forceSimulation(data.nodes)                 // Force algorithm is applied to data.nodes
      .force("link", d3.forceLink()                               // This force provides links between nodes
            .id(function(d) { return d.id; })                     // This provide  the id of a node
            .links(data.links)                                    // and this the list of links
      )
      .force("charge", d3.forceManyBody().strength(-400))         // This adds repulsion between nodes. Play with the -400 for the repulsion strength
      .force("center", d3.forceCenter(width / 2, height / 2))     // This force attracts nodes to the center of the svg area
      .on("end", ticked);

  // This function is run at each iteration of the force algorithm, updating the nodes position.
  function ticked() {
    link
        .attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node
         .attr("cx", function (d) { return d.x+6; })
         .attr("cy", function(d) { return d.y-6; });
  }

});
</script>

</html>

